{"ast":null,"code":"import { getUsers, UserAPI } from \"../../components/users/Api\";\nlet initialstate = {\n  users: [],\n  pageSize: 4,\n  totalUsersCount: 0,\n  curentPage: 1,\n  isFetcing: true,\n  followingInProgress: []\n};\nexport const r = a => {\n  console.log(a);\n};\n\nconst UsersReducer = (state = initialstate, action) => {\n  if (action.type === 'follow') {\n    return { ...state,\n      users: updateObjectInArray(state.users, action.userId, \"id\", {\n        followed: true\n      })\n    };\n  } else if (action.type === 'unfollow') {\n    return { ...state,\n      users: state.users.map(u => {\n        if (u.id === action.userID) {\n          return { ...u,\n            followed: false\n          };\n        }\n\n        return u;\n      })\n    };\n  } else if (action.type === 'following_InProgress') {\n    return { ...state,\n      followingInProgress: action.isFetcing ? [...state.followingInProgress, action.userID] : state.followingInProgress.filter(id => id != action.userID)\n    };\n  } else if (action.type === 'set_user') {\n    return { ...state,\n      users: action.users\n    };\n  } else if (action.type === 'set_TotalCount') {\n    return { ...state,\n      totalUsersCount: action.totalCount\n    };\n  } else if (action.type === 'set_curentPage') {\n    return { ...state,\n      curentPage: action.curentPage\n    };\n  } else if (action.type === 'togle_fetch') {\n    return { ...state,\n      isFetcing: action.isFetcing\n    };\n  } else {\n    return state;\n  }\n};\n\nexport const fallowSEC = userID => {\n  return {\n    type: 'follow',\n    userID\n  };\n};\nexport const unfallowSEC = userID => {\n  return {\n    type: 'unfollow',\n    userID\n  };\n};\nexport const toggleisFetcing = isFetcing => ({\n  type: 'togle_fetch',\n  isFetcing\n});\nexport const setuser = users => ({\n  type: 'set_user',\n  users\n});\nexport const togglefollowingInProgress = (isFetcing, userID) => ({\n  type: 'following_InProgress',\n  isFetcing,\n  userID\n});\nexport const SetCurrentPage = p => ({\n  type: 'set_curentPage',\n  curentPage: p\n});\nexport const setTotalCount = TotalCount => ({\n  type: 'set_TotalCount',\n  totalCount: TotalCount\n});\nexport const getUsersC = (curentPage, pageSize) => {\n  return dispatch => {\n    dispatch(toggleisFetcing(true));\n    UserAPI.getUsers(curentPage, pageSize).then(data => {\n      dispatch(toggleisFetcing(false));\n      dispatch(SetCurrentPage(curentPage));\n      dispatch(setuser(data.items));\n      dispatch(setTotalCount(data.totalCount));\n    });\n  };\n};\nexport const unfallow = UId => {\n  return dispatch => {\n    dispatch(togglefollowingInProgress(true, UId));\n    UserAPI.Unfollow(UId).then(response => {\n      if (response.data === false) {\n        unfallowSEC(UId);\n      }\n\n      dispatch(togglefollowingInProgress(false, UId));\n    });\n  };\n};\nexport const fallow = UId => {\n  return dispatch => {\n    dispatch(togglefollowingInProgress(true, UId));\n    UserAPI.Follow(UId).then(response => {\n      if (response.data === true) {\n        fallowSEC(UId);\n      }\n\n      dispatch(togglefollowingInProgress(false, UId));\n    });\n  };\n};\nexport default UsersReducer;","map":{"version":3,"sources":["C:/Users/tvirg/OneDrive/Рабочий стол/my app/src/redux/state/Users-reducer.js"],"names":["getUsers","UserAPI","initialstate","users","pageSize","totalUsersCount","curentPage","isFetcing","followingInProgress","r","a","console","log","UsersReducer","state","action","type","updateObjectInArray","userId","followed","map","u","id","userID","filter","totalCount","fallowSEC","unfallowSEC","toggleisFetcing","setuser","togglefollowingInProgress","SetCurrentPage","p","setTotalCount","TotalCount","getUsersC","dispatch","then","data","items","unfallow","UId","Unfollow","response","fallow","Follow"],"mappings":"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","sourcesContent":["import {getUsers, UserAPI} from \"../../components/users/Api\";\n\nlet initialstate = {\n    users: [],\n    pageSize: 4,\n    totalUsersCount: 0,\n    curentPage: 1,\n    isFetcing: true,\n    followingInProgress: []\n};\nexport const r = (a) =>{\n    console.log(a);\n}\nconst UsersReducer = (state = initialstate, action) => {\n    if (action.type === 'follow') {\n        return {\n            ...state,\n            users: updateObjectInArray(state.users, action.userId, \"id\", {followed: true} )\n        }\n    } else if (action.type === 'unfollow') {\n        return {\n            ...state,\n            users: state.users.map(u => {\n                if (u.id === action.userID) {\n                    return {\n                        ...u, followed: false\n                    }\n\n                }\n                return u;\n            })\n        }\n    }else if (action.type === 'following_InProgress') {\n    return {\n        ...state,\n        followingInProgress: action.isFetcing\n            ? [...state.followingInProgress, action.userID]\n            : state.followingInProgress.filter(id => id != action.userID)}\n    }else if (action.type === 'set_user') {\n        return {\n            ...state, users: action.users }\n    } else if (action.type === 'set_TotalCount') {\n        return {...state, totalUsersCount: action.totalCount}\n    }else if (action.type === 'set_curentPage') {\n        return {...state, curentPage: action.curentPage}\n    }else if (action.type === 'togle_fetch') {\n        return {...state, isFetcing : action.isFetcing}\n    }else {\n        return state;\n    }\n};\nexport const fallowSEC = (userID) => {\n    return {\n        type: 'follow',\n        userID\n    }\n};\n\nexport const unfallowSEC = (userID) => {\n    return {\n        type: 'unfollow',\n        userID\n    }\n};\nexport const toggleisFetcing = (isFetcing) => ({type: 'togle_fetch', isFetcing });\nexport const setuser = (users) => ({type: 'set_user', users});\nexport const togglefollowingInProgress = (isFetcing, userID) => ({type: 'following_InProgress', isFetcing, userID});\nexport const SetCurrentPage = (p) =>({type: 'set_curentPage', curentPage: p});\nexport const setTotalCount = (TotalCount) =>({type: 'set_TotalCount', totalCount: TotalCount});\n\nexport const getUsersC = (curentPage, pageSize) => {\n    return (dispatch) => {\n    dispatch(toggleisFetcing(true));\n        UserAPI.getUsers(curentPage, pageSize).then(data => {\n        dispatch(toggleisFetcing(false));\n        dispatch(SetCurrentPage(curentPage));\n        dispatch(setuser(data.items));\n        dispatch(setTotalCount(data.totalCount));\n})};\n};\n\nexport const unfallow = (UId) => {\n    return (dispatch) => {\n        dispatch(togglefollowingInProgress(true, UId));\n        UserAPI.Unfollow(UId)\n            .then(response => {\n                if (response.data === false){\n                    unfallowSEC(UId);\n                }\n                dispatch(togglefollowingInProgress(false, UId));\n            });\n        };\n};\nexport const fallow = (UId) => {\n    return (dispatch) => {\n        dispatch(togglefollowingInProgress(true, UId));\n        UserAPI.Follow(UId)\n            .then(response => {\n                if (response.data === true){\n                    fallowSEC(UId);\n                }\n                dispatch(togglefollowingInProgress(false, UId));\n            });\n    };\n};\n\n\n\n\nexport default UsersReducer;\n"]},"metadata":{},"sourceType":"module"}